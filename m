Return-Path: <linux-kernel+bounces-593104-lists+linux-kernel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from ny.mirrors.kernel.org (ny.mirrors.kernel.org [147.75.199.223])
	by mail.lfdr.de (Postfix) with ESMTPS id A0966A7F545
	for <lists+linux-kernel@lfdr.de>; Tue,  8 Apr 2025 08:51:42 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ny.mirrors.kernel.org (Postfix) with ESMTPS id 8337017895D
	for <lists+linux-kernel@lfdr.de>; Tue,  8 Apr 2025 06:51:42 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id F016F25F99C;
	Tue,  8 Apr 2025 06:51:36 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b="BhyV461g"
Received: from smtp.kernel.org (aws-us-west-2-korg-mail-1.web.codeaurora.org [10.30.226.201])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 5CC191A9B32
	for <linux-kernel@vger.kernel.org>; Tue,  8 Apr 2025 06:51:36 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=10.30.226.201
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1744095096; cv=none; b=TFXHenXZSQ62skdODpTLGWIC5NV5cUK9e+G0kTU9GqhfI5yNRYRzPcVGMxd2mxvNlFMJPK5kS4tO0WG2M0JjzT9yh1/ahv+hHKzM7MSqj4XO3XbkDF4YeMIEm3nl3zuu9a0h1svtyolm3RbJ1ZxWBQ6w9ESe90iShBnPxjOpNag=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1744095096; c=relaxed/simple;
	bh=vXfDKe6A9XOONd93v6d3bmaYZpfSM7WvA/Iu2nJfXI8=;
	h=Date:Message-ID:From:To:Cc:Subject:In-Reply-To:References:
	 MIME-Version:Content-Type; b=YScNV4NQn2+OHJLe4oCOr+SdDunZ7n2U/TsXi259D2PycmYh3u7+pdXY0/+p4aJuDnmyO+DklWHswfQTllS8uddGrPHObeQJiXxNqOMWUqSLpN6Zl6Seh9jzY2yA1cRtDzh5UKsL4agbBX+WrkaFZTpGeE9+3QAhFf8nRTaP+C0=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b=BhyV461g; arc=none smtp.client-ip=10.30.226.201
Received: by smtp.kernel.org (Postfix) with ESMTPSA id D65C7C4CEE5;
	Tue,  8 Apr 2025 06:51:35 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1744095095;
	bh=vXfDKe6A9XOONd93v6d3bmaYZpfSM7WvA/Iu2nJfXI8=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
	b=BhyV461g3VDb+3omCSWZRyG7dUjFqrG9QgFnx+Vt3r4oi+BHwHj8NOKm4Ixt9aCJx
	 IgELwBbK+eLuDu6kWKT7Tj454+gc//8567yFEMqBHeibaAyrodclrwHdn0n0VIfivf
	 bmzMw/SZyhAfUaP/d4t5lL8dvH/JP0XLyqpzbgl0v4a/xCRrVX0UWG7ZW0lj+g8RSq
	 2XB1mdaf+blM5JBM9i/G3lv/eRGzhKzBvD1oDNaoEpyf/XT8/vqtUbsAUXYQdpThhN
	 46PN7eFFxeEP1ycmGOOw+cGOrXg+vpYY8Zi6L/HuDjVcsnPxRMERUc+z2qPm1eoKlm
	 2dP1rtjwxuBBw==
Received: from sofa.misterjones.org ([185.219.108.64] helo=goblin-girl.misterjones.org)
	by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
	(Exim 4.95)
	(envelope-from <maz@kernel.org>)
	id 1u22o1-003JCn-7Z;
	Tue, 08 Apr 2025 07:51:33 +0100
Date: Tue, 08 Apr 2025 07:51:32 +0100
Message-ID: <86tt6zkux7.wl-maz@kernel.org>
From: Marc Zyngier <maz@kernel.org>
To: Donghyeok Choe <d7271.choe@samsung.com>
Cc: Sudeep Holla <sudeep.holla@arm.com>,
	Youngmin Nam <youngmin.nam@samsung.com>,
	Thomas Gleixner <tglx@linutronix.de>,
	Saravana Kannan <saravanak@google.com>,
	Ulf Hansson
	<ulf.hansson@linaro.org>,
	Vincent Guittot <vincent.guittot@linaro.org>,
	linux-arm-kernel@lists.infradead.org,
	linux-kernel@vger.kernel.org,
	kernel-team@android.com,
	hajun.sung@samsung.com,
	joonki.min@samsung.com,
	ne.yoo@samsung.com
Subject: Re: [GICv3 ITS]S2IDLE framework does not invoke syscore_ops in GICv3 ITS driver
In-Reply-To: <20250407225146.GA2858456@tiffany>
References: <CGME20250326030527epcas2p33aa30e62cc8a00c9e151c35bee71dac5@epcas2p3.samsung.com>
	<Z+Nv8U/4P3taDpUq@perf>
	<8634f0mall.wl-maz@kernel.org>
	<Z+TEa8CVAYnbD/Tu@perf>
	<20250402-messy-wild-squid-7b4da9@sudeepholla>
	<Z+3kwsesiXyC0hbO@perf>
	<20250403-rare-wasp-of-management-9bce59@sudeepholla>
	<20250404041323.GA685160@tiffany>
	<20250407-amiable-perfect-hummingbird-06ad83@sudeepholla>
	<20250407225146.GA2858456@tiffany>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/29.4
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Precedence: bulk
X-Mailing-List: linux-kernel@vger.kernel.org
List-Id: <linux-kernel.vger.kernel.org>
List-Subscribe: <mailto:linux-kernel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-kernel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: d7271.choe@samsung.com, sudeep.holla@arm.com, youngmin.nam@samsung.com, tglx@linutronix.de, saravanak@google.com, ulf.hansson@linaro.org, vincent.guittot@linaro.org, linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org, kernel-team@android.com, hajun.sung@samsung.com, joonki.min@samsung.com, ne.yoo@samsung.com
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false

On Mon, 07 Apr 2025 23:51:46 +0100,
Donghyeok Choe <d7271.choe@samsung.com> wrote:
> 
> [1  <text/plain; us-ascii (7bit)>]
> On Mon, Apr 07, 2025 at 10:17:43AM +0100, Sudeep Holla wrote:

> > Do you use any suspend/resume logic in drivers/irqchip/irq-gic-pm.c ?
> No, there are parts of the GIC that require secure access, so the
> GIC save/restore is performed by the firmware.
> Since the GIC-ITS is entirely controlled as a non-secure IP,
> I think it is more efficient to perform save/restore in the kernel.

More efficient? Give me *one* aspect of this save/restore sequence
that is done in a more efficiently way in the kernel. Dumping MMIO
accesses into memory has the exact same cost at EL1, El2 or EL3, and
splitting things along an arbitrary line to paper over bad firmware is
not a valid argument.

	M.

-- 
Without deviation from the norm, progress is not possible.

