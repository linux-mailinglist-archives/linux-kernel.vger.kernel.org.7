Return-Path: <linux-kernel+bounces-697406-lists+linux-kernel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from ny.mirrors.kernel.org (ny.mirrors.kernel.org [147.75.199.223])
	by mail.lfdr.de (Postfix) with ESMTPS id 9CFB9AE33BF
	for <lists+linux-kernel@lfdr.de>; Mon, 23 Jun 2025 04:47:07 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ny.mirrors.kernel.org (Postfix) with ESMTPS id 295C716E4B3
	for <lists+linux-kernel@lfdr.de>; Mon, 23 Jun 2025 02:47:08 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 21B69184524;
	Mon, 23 Jun 2025 02:47:02 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=163.com header.i=@163.com header.b="nyXNZtmX"
Received: from m16.mail.163.com (m16.mail.163.com [220.197.31.4])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 5149B17996
	for <linux-kernel@vger.kernel.org>; Mon, 23 Jun 2025 02:46:56 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=220.197.31.4
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1750646821; cv=none; b=ubfjv4fcK0FHiNYXcNZHvCgPhwTtDlg0MHCT9zVMGBpqYvZ9tWY34ggeJsiRNqkt4UiiRirFk8tu7veP7vNLH+Zug3PeWELz2GtzySDR6i9KOPJ5H+Yot03aUON1W466AX8cH8AcFhks8VILnPvC+0wedZjnUfah07PP8Upe9OM=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1750646821; c=relaxed/simple;
	bh=LGAJtWI6dAuiMgWXlkKRboPFf3HNxBoBn1sCn29qfd8=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:Content-Type:
	 MIME-Version:Message-ID; b=d84mcccDa1IWgZAGWNXSf4FaOIGRMv+3KMOTGduYuL3LljkHsuiecuWuVXiykTpE7yZFKe9j9Qu+SFRs9sW2PuUFlcaXWsUHs4bt1SrRFtAHntvm2AyUZeJW1/WzBo6xpUzg7iSqulH4Ha12ITMmLW6L7wTkCjWQCpqDHamAF4U=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com; spf=pass smtp.mailfrom=163.com; dkim=fail (1024-bit key) header.d=163.com header.i=@163.com header.b=nyXNZtmX reason="signature verification failed"; arc=none smtp.client-ip=220.197.31.4
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=163.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
	s=s110527; h=Date:From:To:Subject:Content-Type:MIME-Version:
	Message-ID; bh=gAYfzw7Vqx6j01PdT9cwt2c/gOB9RnRGbBMWkkVnrdo=; b=n
	yXNZtmXoBWNmGM5VkJIXAg2hCuVIe7NZQ3Yo+/PWmk5FOAyRa1I4znfrIPpSNNiG
	KAMcvTWcYPCfZMu3iC81shJqPYVLCqroNolgd+B5CdhiXs12JBryDAM28h0uj4q3
	m/w0xpwwHgmDNVmzwaiTjmeXE36hASjKWgXlE4e1xY=
Received: from 00107082$163.com ( [111.35.191.131] ) by
 ajax-webmail-wmsvr-40-133 (Coremail) ; Mon, 23 Jun 2025 10:45:31 +0800
 (CST)
Date: Mon, 23 Jun 2025 10:45:31 +0800 (CST)
From: "David Wang" <00107082@163.com>
To: "Suren Baghdasaryan" <surenb@google.com>
Cc: oliver.sang@intel.com, urezki@gmail.com, ahuang12@lenovo.com,
	akpm@linux-foundation.org, bhe@redhat.com, hch@infradead.org,
	linux-kernel@vger.kernel.org, linux-mm@kvack.org, lkp@intel.com,
	mjguzik@gmail.com, oe-lkp@lists.linux.dev, harry.yoo@oracle.com,
	kent.overstreet@linux.dev
Subject: Re: CONFIG_TEST_VMALLOC=y conflict/race with alloc_tag_init
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.14 build 20240801(9da12a7b)
 Copyright (c) 2002-2025 www.mailtech.cn 163com
In-Reply-To: <CAJuCfpFLKR7CqAHG+QjHt4wCLgWmP7dD+f5D8Jx6gHUoXSe1AA@mail.gmail.com>
References: <202506181351.bba867dd-lkp@intel.com>
 <20250620100258.595495-1-00107082@163.com>
 <CAJuCfpFLKR7CqAHG+QjHt4wCLgWmP7dD+f5D8Jx6gHUoXSe1AA@mail.gmail.com>
X-NTES-SC: AL_Qu2eAvqfuU8o5yCdYukZnEYQheY4XMKyuPkg1YJXOp80mSXy+iYnZ25qPV7/9PmhFD2moQmnSjRn68FjTbJCXIlT2m1HWQ+Bysp3OCN0wfuT
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset=UTF-8
Precedence: bulk
X-Mailing-List: linux-kernel@vger.kernel.org
List-Id: <linux-kernel.vger.kernel.org>
List-Subscribe: <mailto:linux-kernel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-kernel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Message-ID: <375419f4.2ba1.1979aad313a.Coremail.00107082@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID:hSgvCgDnX6XMv1hoLhEiAA--.2818W
X-CM-SenderInfo: qqqrilqqysqiywtou0bp/xtbBEgF1qmhYtSo62gADsA
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==

CkF0IDIwMjUtMDYtMjMgMDY6NTA6NDQsICJTdXJlbiBCYWdoZGFzYXJ5YW4iIDxzdXJlbmJAZ29v
Z2xlLmNvbT4gd3JvdGU6Cj5PbiBGcmksIEp1biAyMCwgMjAyNSBhdCAzOjAz4oCvQU0gRGF2aWQg
V2FuZyA8MDAxMDcwODJAMTYzLmNvbT4gd3JvdGU6Cj4+Cj4+IE9uIFdlZCwgSnVuIDE4LCAyMDI1
IGF0IDAyOjI1OjM3UE0gKzA4MDAsIGtlcm5lbCB0ZXN0IHJvYm90IHdyb3RlOgo+PiA+Cj4+ID4g
SGVsbG8sCj4+ID4KPj4gPiBmb3IgdGhpcyBjaGFuZ2UsIHdlIHJlcG9ydGVkCj4+ID4gIltsaW51
eC1uZXh0Om1hc3Rlcl0gW2xpYi90ZXN0X3ZtYWxsb2MuY10gIDdmYzg1YjkyZGI6IE1lbS1JbmZv
Igo+PiA+IGluCj4+ID4gaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvYWxsLzIwMjUwNTA3MTU1NS5l
NzU3ZjFlMC1sa3BAaW50ZWwuY29tLwo+PiA+Cj4+ID4gYXQgdGhhdCB0aW1lLCB3ZSBtYWRlIHNv
bWUgdGVzdHMgd2l0aCB4ODZfNjQgY29uZmlnIHdoaWNoIHJ1bnMgd2VsbC4KPj4gPgo+PiA+IG5v
dyB3ZSBub3RpY2VkIHRoZSBjb21taXQgaXMgaW4gbWFpbmxpbmUgbm93Lgo+Pgo+PiA+IHRoZSBj
b25maWcgc3RpbGwgaGFzIGV4cGVjdGVkIGRpZmYgd2l0aCBwYXJlbnQ6Cj4+ID4KPj4gPiAtLS0g
L3BrZy9saW51eC94ODZfNjQtcmFuZGNvbmZpZy0xNjEtMjAyNTA2MTQvZ2NjLTEyLzdhNzMzNDhl
NWQ0NzE1YjU1NjVhNTNmMjFjMDFlYTdiNTRlNDZjYmQvLmNvbmZpZyAgIDIwMjUtMDYtMTcgMTQ6
NDA6MjkuNDgxMDUyMTAxICswODAwCj4+ID4gKysrIC9wa2cvbGludXgveDg2XzY0LXJhbmRjb25m
aWctMTYxLTIwMjUwNjE0L2djYy0xMi8yZDc2ZTc5MzE1ZTQwM2FhYjU5NWQ0Yzg4MzBiN2E0NmMx
OWYwZjNiLy5jb25maWcgICAyMDI1LTA2LTE3IDE0OjQxOjE4LjQ0ODU0MzczOCArMDgwMAo+PiA+
IEBAIC03NTUxLDcgKzc1NTEsNyBAQCBDT05GSUdfVEVTVF9JREE9bQo+PiA+ICBDT05GSUdfVEVT
VF9NSVNDX01JTk9SPW0KPj4gPiAgIyBDT05GSUdfVEVTVF9MS00gaXMgbm90IHNldAo+PiA+ICBD
T05GSUdfVEVTVF9CSVRPUFM9bQo+PiA+IC1DT05GSUdfVEVTVF9WTUFMTE9DPW0KPj4gPiArQ09O
RklHX1RFU1RfVk1BTExPQz15Cj4+ID4gICMgQ09ORklHX1RFU1RfQlBGIGlzIG5vdCBzZXQKPj4g
PiAgQ09ORklHX0ZJTkRfQklUX0JFTkNITUFSSz1tCj4+ID4gICMgQ09ORklHX1RFU1RfRklSTVdB
UkUgaXMgbm90IHNldAo+PiA+Cj4+ID4KPj4gPiB0aGVuIHdlIG5vdGljZWQgc2ltaWxhciByYW5k
b20gaXNzdWUgd2l0aCB4ODZfNjQgcmFuZGNvbmZpZyB0aGlzIHRpbWUuCj4+ID4KPj4gPiA3YTcz
MzQ4ZTVkNDcxNWI1IDJkNzZlNzkzMTVlNDAzYWFiNTk1ZDRjODgzMAo+PiA+IC0tLS0tLS0tLS0t
LS0tLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+ID4gICAgICAgIGZhaWw6cnVucyAg
JXJlcHJvZHVjdGlvbiAgICBmYWlsOnJ1bnMKPj4gPiAgICAgICAgICAgIHwgICAgICAgICAgICAg
fCAgICAgICAgICAgICB8Cj4+ID4gICAgICAgICAgICA6MTk5ICAgICAgICAgMzQlICAgICAgICAg
IDY3OjIwMCAgIGRtZXNnLktBU0FOOm51bGwtcHRyLWRlcmVmX2luX3JhbmdlWyMtI10KPj4gPiAg
ICAgICAgICAgIDoxOTkgICAgICAgICAzNCUgICAgICAgICAgNjc6MjAwICAgZG1lc2cuS2VybmVs
X3BhbmljLW5vdF9zeW5jaW5nOkZhdGFsX2V4Y2VwdGlvbgo+PiA+ICAgICAgICAgICAgOjE5OSAg
ICAgICAgIDM0JSAgICAgICAgICA2NzoyMDAgICBkbWVzZy5NZW0tSW5mbwo+PiA+ICAgICAgICAg
ICAgOjE5OSAgICAgICAgIDM0JSAgICAgICAgICA2NzoyMDAgICBkbWVzZy5Pb3BzOmdlbmVyYWxf
cHJvdGVjdGlvbl9mYXVsdCxwcm9iYWJseV9mb3Jfbm9uLWNhbm9uaWNhbF9hZGRyZXNzIzojWyMj
XVNNUF9LQVNBTgo+PiA+ICAgICAgICAgICAgOjE5OSAgICAgICAgIDM0JSAgICAgICAgICA2Nzoy
MDAgICBkbWVzZy5SSVA6ZG93bl9yZWFkX3RyeWxvY2sKPj4gPgo+PiA+IHdlIGRvbid0IGhhdmUg
ZW5vdWdoIGtub3dsZWRnZSB0byB1bmRlcnN0YW5kIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBj
b2RlCj4+ID4gY2hhbmdlIGFuZCB0aGUgcmFuZG9tIGlzc3Vlcy4ganVzdCByZXBvcnQgd2hhdCB3
ZSBvYnN2ZXJ2ZWQgaW4gb3VyIHRlc3RzIEZZSS4KPj4gPgo+Pgo+PiBJIHRoaW5rIHRoaXMgaXMg
Y2F1c2VkIGJ5IGEgcmFjZSBiZXR3ZWVuIHZtYWxsb2NfdGVzdF9pbml0IGFuZCBhbGxvY190YWdf
aW5pdC4KPj4KPj4gdm1hbGxvY190ZXN0IGFjdHVhbGx5IGRlcGVuZHMgb24gYWxsb2NfdGFnIHZp
YSBhbGxvY190YWdfdG9wX3VzZXJzLCBiZWNhdXNlIHdoZW4KPj4gbWVtb3J5IGFsbG9jYXRpb24g
ZmFpbHMgc2hvd19tZW0oKSB3b3VsZCBpbnZva2UgYWxsb2NfdGFnX3RvcF91c2Vycy4KPj4KPj4g
V2l0aCBmb2xsb3dpbmcgY29uZmlndXJhdGlvbjoKPj4KPj4gQ09ORklHX1RFU1RfVk1BTExPQz15
Cj4+IENPTkZJR19NRU1fQUxMT0NfUFJPRklMSU5HPXkKPj4gQ09ORklHX01FTV9BTExPQ19QUk9G
SUxJTkdfRU5BQkxFRF9CWV9ERUZBVUxUPXkKPj4gQ09ORklHX01FTV9BTExPQ19QUk9GSUxJTkdf
REVCVUc9eQo+Pgo+PiBJZiB2bWFsbG9jX3Rlc3RfaW5pdCBzdGFydHMgYmVmb3JlIGFsbG9jX3Rh
Z19pbml0LCBzaG93X21lbSgpIHdvdWxkIGNhdXNlCj4+IGEgTlVMTCBkZWZlcmVuY2UgYmVjYXVz
ZSBhbGxvY190YWdfY3R0eXBlIHdhcyBub3QgaW5pdCB5ZXQuCj4+Cj4+IEkgYWRkIHNvbWUgZGVi
dWcgdG8gY29uZmlybSB0aGlzIHRoZW9yeQo+PiBkaWZmIC0tZ2l0IGEvbGliL2FsbG9jX3RhZy5j
IGIvbGliL2FsbG9jX3RhZy5jCj4+IGluZGV4IGQ0OGI4MGYzZjAwNy4uOWI4ZTc1MDEwMTBmIDEw
MDY0NAo+PiAtLS0gYS9saWIvYWxsb2NfdGFnLmMKPj4gKysrIGIvbGliL2FsbG9jX3RhZy5jCj4+
IEBAIC0xMzMsNiArMTMzLDggQEAgc2l6ZV90IGFsbG9jX3RhZ190b3BfdXNlcnMoc3RydWN0IGNv
ZGV0YWdfYnl0ZXMgKnRhZ3MsIHNpemVfdCBjb3VudCwgYm9vbCBjYW5fc2wKPj4gICAgICAgICBz
dHJ1Y3QgY29kZXRhZyAqY3Q7Cj4+ICAgICAgICAgc3RydWN0IGNvZGV0YWdfYnl0ZXMgbjsKPj4g
ICAgICAgICB1bnNpZ25lZCBpbnQgaSwgbnIgPSAwOwo+PiArICAgICAgIHByX2luZm8oIm1lbW9y
eSBwcm9maWxpbmcgYWxsb2MgdG9wICVkOiAlbGx4XG4iLCBtZW1fcHJvZmlsaW5nX3N1cHBvcnQs
IChsb25nIGxvbmcpYWxsb2NfdGFnX2N0dHlwZSk7Cj4+ICsgICAgICAgcmV0dXJuIDA7Cj4+Cj4+
ICAgICAgICAgaWYgKGNhbl9zbGVlcCkKPj4gICAgICAgICAgICAgICAgIGNvZGV0YWdfbG9ja19t
b2R1bGVfbGlzdChhbGxvY190YWdfY3R0eXBlLCB0cnVlKTsKPj4gQEAgLTgzMSw2ICs4MzMsNyBA
QCBzdGF0aWMgaW50IF9faW5pdCBhbGxvY190YWdfaW5pdCh2b2lkKQo+PiAgICAgICAgICAgICAg
ICAgc2h1dGRvd25fbWVtX3Byb2ZpbGluZyh0cnVlKTsKPj4gICAgICAgICAgICAgICAgIHJldHVy
biBQVFJfRVJSKGFsbG9jX3RhZ19jdHR5cGUpOwo+PiAgICAgICAgIH0KPj4gKyAgICAgICBwcl9p
bmZvKCJtZW1vcnkgcHJvZmlsaW5nIHJlYWR5ICVkOiAlbGx4XG4iLCBtZW1fcHJvZmlsaW5nX3N1
cHBvcnQsIChsb25nIGxvbmcpYWxsb2NfdGFnX2N0dHlwZSk7Cj4+Cj4+ICAgICAgICAgcmV0dXJu
IDA7Cj4+ICB9Cj4+Cj4+IFdoZW4gYm9vdHVwIHRoZSBrZXJuZWwsIHRoZSBsb2cgc2hvd3M6Cj4+
Cj4+ICQgc3VkbyBkbWVzZyAtVCB8IGdyZXAgcHJvZmlsaW5nCj4+IFtGcmkgSnVuIDIwIDE3OjI5
OjM1IDIwMjVdIG1lbW9yeSBwcm9maWxpbmcgYWxsb2MgdG9wIDE6IDAgIDwtLS0gYWxsb2NfdGFn
X2N0dHlwZSA9PSBOVUxMCj4+IFtGcmkgSnVuIDIwIDE3OjMwOjI0IDIwMjVdIG1lbW9yeSBwcm9m
aWxpbmcgcmVhZHkgMTogZmZmZjliMTY0MWFhMDZjMAo+Pgo+Pgo+PiB2bWFsbG9jX3Rlc3RfaW5p
dCBzaG91bGQgaGFwcGVuZWQgYWZ0ZXIgYWxsb2NfdGFnX2luaXQgaWYgQ09ORklHX1RFU1RfVk1B
TExPQz15LAo+PiBvciBtZW1fc2hvdygpIHNob3VsZCBjaGVjayB3aGV0aGVyIGFsbG9jX3RhZyBp
cyBkb25lIGluaXRpYWxpemVkIHdoZW4gY2FsbGluZwo+PiBhbGxvY190YWdfdG9wX3VzZXJzCj4K
PlRoYW5rcyBmb3IgcmVwb3J0aW5nIQo+U28sIElJVUMgaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcv
YWxsLzIwMjUwNjIwMTk1MzA1LjExMTUxNTEtMS1oYXJyeS55b29Ab3JhY2xlLmNvbS8KPndpbGwg
YWRkcmVzcyB0aGlzIGlzc3VlIGFzIHdlbGwuIElzIHRoYXQgY29ycmVjdD8KClllcywgdGhlIHBh
bmljIGNhbiBiZSBmaXggYnkgdGhhdCBwYXRjaC4KCkkgc3RpbGwgZmVlbCBpdCBiZXR0ZXIgdG8g
ZGVsYXkgdm1hbGxvY190ZXN0X2luaXQsIG1ha2UgaXQgaGFwcGVuIGFmdGVyIGFsbG9jX3RhZ19p
bml0LgpPciwgbWF5YmUgd2UgY2FuIHByb21vdGUgYWxsb2NfdGFnX2luaXQgdG8gc29tZSBlYXJs
eSBpbml0PyBJIHJlbWVtYmVyIHJlcG9ydGluZyBzb21lIGFsbG9jYXRpb24Kbm90IHJlZ2lzdGVy
ZWQgYnkgbWVtb3J5IHByb2ZpbGluZyBkdXJpbmcgYm9vdCwgIApodHRwczovL2xvcmUua2VybmVs
Lm9yZy9hbGwvMjEzZmY3ZDIuN2M2Yy4xOTQ1ZWIwYzJmZi5Db3JlbWFpbC4wMDEwNzA4MkAxNjMu
Y29tLwoKSSB3aWxsIG1ha2Ugc29tZSB0ZXN0cywgYW5kIHVwZGF0ZSBsYXRlcgoKCkRhdmlkCgoK
Pgo+Pgo+Pgo+Pgo+PiBEYXZpZAo+Pgo=

